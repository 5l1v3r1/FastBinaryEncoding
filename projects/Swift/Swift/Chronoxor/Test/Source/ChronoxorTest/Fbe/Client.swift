// Automatically generated by the Fast Binary Encoding compiler, do not modify!
// https://github.com/chronoxor/FastBinaryEncoding
// Source: test.fbe
// Version: 1.3.0.0

import Foundation
import ChronoxorFbe
import ChronoxorProto

// Fast Binary Encoding Test client
open class Client : ChronoxorFbe.ClientProtocol {
    // Imported senders
    let ProtoSender: ChronoxorProto.Client

    // Imported receivers
    let ProtoReceiver: ChronoxorProto.Client?

    // Client sender models accessors
    let StructSimpleSenderModel: StructSimpleModel
    let StructOptionalSenderModel: StructOptionalModel
    let StructNestedSenderModel: StructNestedModel
    let StructBytesSenderModel: StructBytesModel
    let StructArraySenderModel: StructArrayModel
    let StructVectorSenderModel: StructVectorModel
    let StructListSenderModel: StructListModel
    let StructSetSenderModel: StructSetModel
    let StructMapSenderModel: StructMapModel
    let StructHashSenderModel: StructHashModel
    let StructHashExSenderModel: StructHashExModel
    let StructEmptySenderModel: StructEmptyModel

    // Client receiver values accessors
    private var StructSimpleReceiverValue: ChronoxorTest.StructSimple
    private var StructOptionalReceiverValue: ChronoxorTest.StructOptional
    private var StructNestedReceiverValue: ChronoxorTest.StructNested
    private var StructBytesReceiverValue: ChronoxorTest.StructBytes
    private var StructArrayReceiverValue: ChronoxorTest.StructArray
    private var StructVectorReceiverValue: ChronoxorTest.StructVector
    private var StructListReceiverValue: ChronoxorTest.StructList
    private var StructSetReceiverValue: ChronoxorTest.StructSet
    private var StructMapReceiverValue: ChronoxorTest.StructMap
    private var StructHashReceiverValue: ChronoxorTest.StructHash
    private var StructHashExReceiverValue: ChronoxorTest.StructHashEx
    private var StructEmptyReceiverValue: ChronoxorTest.StructEmpty

    // Client receiver models accessors
    private let StructSimpleReceiverModel: StructSimpleModel
    private let StructOptionalReceiverModel: StructOptionalModel
    private let StructNestedReceiverModel: StructNestedModel
    private let StructBytesReceiverModel: StructBytesModel
    private let StructArrayReceiverModel: StructArrayModel
    private let StructVectorReceiverModel: StructVectorModel
    private let StructListReceiverModel: StructListModel
    private let StructSetReceiverModel: StructSetModel
    private let StructMapReceiverModel: StructMapModel
    private let StructHashReceiverModel: StructHashModel
    private let StructHashExReceiverModel: StructHashExModel
    private let StructEmptyReceiverModel: StructEmptyModel

    public var sendBuffer: Buffer = Buffer()
    public var receiveBuffer: Buffer = Buffer()
    public var logging: Bool = false
    public var final: Bool = false

    public init() {
        ProtoSender = ChronoxorProto.Client(sendBuffer: sendBuffer, receiveBuffer: receiveBuffer)
        ProtoReceiver = ChronoxorProto.Client(sendBuffer: sendBuffer, receiveBuffer: receiveBuffer)
        StructSimpleSenderModel = StructSimpleModel(buffer: sendBuffer)
        StructSimpleReceiverValue = ChronoxorTest.StructSimple()
        StructSimpleReceiverModel = StructSimpleModel()
        StructOptionalSenderModel = StructOptionalModel(buffer: sendBuffer)
        StructOptionalReceiverValue = ChronoxorTest.StructOptional()
        StructOptionalReceiverModel = StructOptionalModel()
        StructNestedSenderModel = StructNestedModel(buffer: sendBuffer)
        StructNestedReceiverValue = ChronoxorTest.StructNested()
        StructNestedReceiverModel = StructNestedModel()
        StructBytesSenderModel = StructBytesModel(buffer: sendBuffer)
        StructBytesReceiverValue = ChronoxorTest.StructBytes()
        StructBytesReceiverModel = StructBytesModel()
        StructArraySenderModel = StructArrayModel(buffer: sendBuffer)
        StructArrayReceiverValue = ChronoxorTest.StructArray()
        StructArrayReceiverModel = StructArrayModel()
        StructVectorSenderModel = StructVectorModel(buffer: sendBuffer)
        StructVectorReceiverValue = ChronoxorTest.StructVector()
        StructVectorReceiverModel = StructVectorModel()
        StructListSenderModel = StructListModel(buffer: sendBuffer)
        StructListReceiverValue = ChronoxorTest.StructList()
        StructListReceiverModel = StructListModel()
        StructSetSenderModel = StructSetModel(buffer: sendBuffer)
        StructSetReceiverValue = ChronoxorTest.StructSet()
        StructSetReceiverModel = StructSetModel()
        StructMapSenderModel = StructMapModel(buffer: sendBuffer)
        StructMapReceiverValue = ChronoxorTest.StructMap()
        StructMapReceiverModel = StructMapModel()
        StructHashSenderModel = StructHashModel(buffer: sendBuffer)
        StructHashReceiverValue = ChronoxorTest.StructHash()
        StructHashReceiverModel = StructHashModel()
        StructHashExSenderModel = StructHashExModel(buffer: sendBuffer)
        StructHashExReceiverValue = ChronoxorTest.StructHashEx()
        StructHashExReceiverModel = StructHashExModel()
        StructEmptySenderModel = StructEmptyModel(buffer: sendBuffer)
        StructEmptyReceiverValue = ChronoxorTest.StructEmpty()
        StructEmptyReceiverModel = StructEmptyModel()
        build(with: false)
    }

    public init(sendBuffer: ChronoxorFbe.Buffer, receiveBuffer: ChronoxorFbe.Buffer) {
        ProtoSender = ChronoxorProto.Client(sendBuffer: sendBuffer, receiveBuffer: receiveBuffer)
        ProtoReceiver = ChronoxorProto.Client(sendBuffer: sendBuffer, receiveBuffer: receiveBuffer)
        StructSimpleSenderModel = StructSimpleModel(buffer: sendBuffer)
        StructSimpleReceiverValue = ChronoxorTest.StructSimple()
        StructSimpleReceiverModel = StructSimpleModel()
        StructOptionalSenderModel = StructOptionalModel(buffer: sendBuffer)
        StructOptionalReceiverValue = ChronoxorTest.StructOptional()
        StructOptionalReceiverModel = StructOptionalModel()
        StructNestedSenderModel = StructNestedModel(buffer: sendBuffer)
        StructNestedReceiverValue = ChronoxorTest.StructNested()
        StructNestedReceiverModel = StructNestedModel()
        StructBytesSenderModel = StructBytesModel(buffer: sendBuffer)
        StructBytesReceiverValue = ChronoxorTest.StructBytes()
        StructBytesReceiverModel = StructBytesModel()
        StructArraySenderModel = StructArrayModel(buffer: sendBuffer)
        StructArrayReceiverValue = ChronoxorTest.StructArray()
        StructArrayReceiverModel = StructArrayModel()
        StructVectorSenderModel = StructVectorModel(buffer: sendBuffer)
        StructVectorReceiverValue = ChronoxorTest.StructVector()
        StructVectorReceiverModel = StructVectorModel()
        StructListSenderModel = StructListModel(buffer: sendBuffer)
        StructListReceiverValue = ChronoxorTest.StructList()
        StructListReceiverModel = StructListModel()
        StructSetSenderModel = StructSetModel(buffer: sendBuffer)
        StructSetReceiverValue = ChronoxorTest.StructSet()
        StructSetReceiverModel = StructSetModel()
        StructMapSenderModel = StructMapModel(buffer: sendBuffer)
        StructMapReceiverValue = ChronoxorTest.StructMap()
        StructMapReceiverModel = StructMapModel()
        StructHashSenderModel = StructHashModel(buffer: sendBuffer)
        StructHashReceiverValue = ChronoxorTest.StructHash()
        StructHashReceiverModel = StructHashModel()
        StructHashExSenderModel = StructHashExModel(buffer: sendBuffer)
        StructHashExReceiverValue = ChronoxorTest.StructHashEx()
        StructHashExReceiverModel = StructHashExModel()
        StructEmptySenderModel = StructEmptyModel(buffer: sendBuffer)
        StructEmptyReceiverValue = ChronoxorTest.StructEmpty()
        StructEmptyReceiverModel = StructEmptyModel()
        build(with: sendBuffer, receiveBuffer: receiveBuffer, final: false)
    }

    public func send(obj: Any) throws -> Int {
        switch obj {
            case is ChronoxorTest.StructSimple: return try send(value: obj as! ChronoxorTest.StructSimple)
            case is ChronoxorTest.StructOptional: return try send(value: obj as! ChronoxorTest.StructOptional)
            case is ChronoxorTest.StructNested: return try send(value: obj as! ChronoxorTest.StructNested)
            case is ChronoxorTest.StructBytes: return try send(value: obj as! ChronoxorTest.StructBytes)
            case is ChronoxorTest.StructArray: return try send(value: obj as! ChronoxorTest.StructArray)
            case is ChronoxorTest.StructVector: return try send(value: obj as! ChronoxorTest.StructVector)
            case is ChronoxorTest.StructList: return try send(value: obj as! ChronoxorTest.StructList)
            case is ChronoxorTest.StructSet: return try send(value: obj as! ChronoxorTest.StructSet)
            case is ChronoxorTest.StructMap: return try send(value: obj as! ChronoxorTest.StructMap)
            case is ChronoxorTest.StructHash: return try send(value: obj as! ChronoxorTest.StructHash)
            case is ChronoxorTest.StructHashEx: return try send(value: obj as! ChronoxorTest.StructHashEx)
            case is ChronoxorTest.StructEmpty: return try send(value: obj as! ChronoxorTest.StructEmpty)
            default: break
        }

        // Try to send using imported clients
        var result: Int = 0
        result = try ProtoSender.send(obj: obj)
        if result > 0 { return result }

        return 0
    }

    public func send(value: ChronoxorTest.StructSimple) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructSimpleSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructSimple serialization failed!")
        assert(StructSimpleSenderModel.verify(), "ChronoxorTest.StructSimple validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructOptional) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructOptionalSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructOptional serialization failed!")
        assert(StructOptionalSenderModel.verify(), "ChronoxorTest.StructOptional validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructNested) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructNestedSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructNested serialization failed!")
        assert(StructNestedSenderModel.verify(), "ChronoxorTest.StructNested validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructBytes) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructBytesSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructBytes serialization failed!")
        assert(StructBytesSenderModel.verify(), "ChronoxorTest.StructBytes validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructArray) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructArraySenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructArray serialization failed!")
        assert(StructArraySenderModel.verify(), "ChronoxorTest.StructArray validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructVector) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructVectorSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructVector serialization failed!")
        assert(StructVectorSenderModel.verify(), "ChronoxorTest.StructVector validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructList) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructListSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructList serialization failed!")
        assert(StructListSenderModel.verify(), "ChronoxorTest.StructList validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructSet) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructSetSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructSet serialization failed!")
        assert(StructSetSenderModel.verify(), "ChronoxorTest.StructSet validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructMap) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructMapSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructMap serialization failed!")
        assert(StructMapSenderModel.verify(), "ChronoxorTest.StructMap validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructHash) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructHashSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructHash serialization failed!")
        assert(StructHashSenderModel.verify(), "ChronoxorTest.StructHash validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructHashEx) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructHashExSenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructHashEx serialization failed!")
        assert(StructHashExSenderModel.verify(), "ChronoxorTest.StructHashEx validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }
    public func send(value: ChronoxorTest.StructEmpty) throws -> Int {
        // Serialize the value into the FBE stream
        let serialized = try StructEmptySenderModel.serialize(value: value)
        assert(serialized > 0, "ChronoxorTest.StructEmpty serialization failed!")
        assert(StructEmptySenderModel.verify(), "ChronoxorTest.StructEmpty validation failed!")

        // Log the value
        if logging {
            let message = value.description
            onSendLog(message: message)
        }

        // Send the serialized value
        return try sendSerialized(serialized: serialized)
    }

    // Send message handler
    open func onSend(buffer: Data, offset: Int, size: Int) throws -> Int { throw NSError() }
    open func onReceive(type: Int, buffer: Data, offset: Int, size: Int) -> Bool {
        return onReceiveListener(listener: self as! ReceiverListener, type: type, buffer: buffer, offset: offset, size: size)
    }

    open func onReceiveListener(listener: ReceiverListener, type: Int, buffer: Data, offset: Int, size: Int) -> Bool {
        switch type {
        case ChronoxorTest.StructSimpleModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructSimpleReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructSimpleReceiverModel.verify(), "Test.StructSimple validation failed!")
            let deserialized = StructSimpleReceiverModel.deserialize(value: &StructSimpleReceiverValue)
            assert(deserialized > 0, "Test.StructSimple deserialization failed!")

            // Log the value
            if logging {
                let message = StructSimpleReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructSimpleReceiverValue)
            return true
        case ChronoxorTest.StructOptionalModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructOptionalReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructOptionalReceiverModel.verify(), "Test.StructOptional validation failed!")
            let deserialized = StructOptionalReceiverModel.deserialize(value: &StructOptionalReceiverValue)
            assert(deserialized > 0, "Test.StructOptional deserialization failed!")

            // Log the value
            if logging {
                let message = StructOptionalReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructOptionalReceiverValue)
            return true
        case ChronoxorTest.StructNestedModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructNestedReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructNestedReceiverModel.verify(), "Test.StructNested validation failed!")
            let deserialized = StructNestedReceiverModel.deserialize(value: &StructNestedReceiverValue)
            assert(deserialized > 0, "Test.StructNested deserialization failed!")

            // Log the value
            if logging {
                let message = StructNestedReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructNestedReceiverValue)
            return true
        case ChronoxorTest.StructBytesModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructBytesReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructBytesReceiverModel.verify(), "Test.StructBytes validation failed!")
            let deserialized = StructBytesReceiverModel.deserialize(value: &StructBytesReceiverValue)
            assert(deserialized > 0, "Test.StructBytes deserialization failed!")

            // Log the value
            if logging {
                let message = StructBytesReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructBytesReceiverValue)
            return true
        case ChronoxorTest.StructArrayModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructArrayReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructArrayReceiverModel.verify(), "Test.StructArray validation failed!")
            let deserialized = StructArrayReceiverModel.deserialize(value: &StructArrayReceiverValue)
            assert(deserialized > 0, "Test.StructArray deserialization failed!")

            // Log the value
            if logging {
                let message = StructArrayReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructArrayReceiverValue)
            return true
        case ChronoxorTest.StructVectorModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructVectorReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructVectorReceiverModel.verify(), "Test.StructVector validation failed!")
            let deserialized = StructVectorReceiverModel.deserialize(value: &StructVectorReceiverValue)
            assert(deserialized > 0, "Test.StructVector deserialization failed!")

            // Log the value
            if logging {
                let message = StructVectorReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructVectorReceiverValue)
            return true
        case ChronoxorTest.StructListModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructListReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructListReceiverModel.verify(), "Test.StructList validation failed!")
            let deserialized = StructListReceiverModel.deserialize(value: &StructListReceiverValue)
            assert(deserialized > 0, "Test.StructList deserialization failed!")

            // Log the value
            if logging {
                let message = StructListReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructListReceiverValue)
            return true
        case ChronoxorTest.StructSetModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructSetReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructSetReceiverModel.verify(), "Test.StructSet validation failed!")
            let deserialized = StructSetReceiverModel.deserialize(value: &StructSetReceiverValue)
            assert(deserialized > 0, "Test.StructSet deserialization failed!")

            // Log the value
            if logging {
                let message = StructSetReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructSetReceiverValue)
            return true
        case ChronoxorTest.StructMapModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructMapReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructMapReceiverModel.verify(), "Test.StructMap validation failed!")
            let deserialized = StructMapReceiverModel.deserialize(value: &StructMapReceiverValue)
            assert(deserialized > 0, "Test.StructMap deserialization failed!")

            // Log the value
            if logging {
                let message = StructMapReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructMapReceiverValue)
            return true
        case ChronoxorTest.StructHashModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructHashReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructHashReceiverModel.verify(), "Test.StructHash validation failed!")
            let deserialized = StructHashReceiverModel.deserialize(value: &StructHashReceiverValue)
            assert(deserialized > 0, "Test.StructHash deserialization failed!")

            // Log the value
            if logging {
                let message = StructHashReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructHashReceiverValue)
            return true
        case ChronoxorTest.StructHashExModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructHashExReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructHashExReceiverModel.verify(), "Test.StructHashEx validation failed!")
            let deserialized = StructHashExReceiverModel.deserialize(value: &StructHashExReceiverValue)
            assert(deserialized > 0, "Test.StructHashEx deserialization failed!")

            // Log the value
            if logging {
                let message = StructHashExReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructHashExReceiverValue)
            return true
        case ChronoxorTest.StructEmptyModel.fbeTypeConst:
            // Deserialize the value from the FBE stream
            StructEmptyReceiverModel.attach(buffer: buffer, offset: offset)
            assert(StructEmptyReceiverModel.verify(), "Test.StructEmpty validation failed!")
            let deserialized = StructEmptyReceiverModel.deserialize(value: &StructEmptyReceiverValue)
            assert(deserialized > 0, "Test.StructEmpty deserialization failed!")

            // Log the value
            if logging {
                let message = StructEmptyReceiverValue.description
                onReceiveLog(message: message)
            }

            // Call receive handler with deserialized value
            listener.onReceive(value: StructEmptyReceiverValue)
            return true
        default: break
        }

        if let ProtoReceiver = ProtoReceiver, ProtoReceiver.onReceiveListener(listener: listener, type: type, buffer: buffer, offset: offset, size: size) {
            return true
        }

        return false
    }
}
